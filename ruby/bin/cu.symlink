#!/usr/bin/env ruby

ENV["LAUNCHY_DISPLAY"] = ENV["DISPLAY"]
ENV["LAUNCHY_BROWSER"] = File.join(File.dirname(__FILE__), 'launchy_browser')
ENV["BROWSER"] = File.join(File.dirname(__FILE__), 'launchy_browser')

if ENV["SELENIUM_FIREFOX_PATH"]
  ENV["PATH"] = "#{ENV["SELENIUM_FIREFOX_PATH"]}:#{ENV["PATH"]}"
end

# start vnc for "headless" selenium
`vncserver :6 -localhost -nolisten tcp -SecurityTypes None -geometry 1280x1024 &>/dev/null`
ENV["DISPLAY"] = ':6'

exec *['cuc', ARGV].flatten
